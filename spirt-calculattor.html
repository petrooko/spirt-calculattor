<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Алко калькулятор</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0b0f14">

<style>
*{box-sizing:border-box}
html,body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,Arial,sans-serif;
  background:#f2f2f7;color:#000;overflow-x:hidden;
}
body.dark{background:#0b0f14;color:#f2f2f7}
.app{max-width:720px;margin:auto;padding:16px}

/* HEADER */
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.title{font-size:26px;font-weight:800}
.sub{font-size:13px;color:#777}
body.dark .sub{color:#aaa}
.switch{
  border:none;border-radius:18px;padding:8px 14px;
  background:linear-gradient(135deg,#5ac8fa,#007aff);
  color:white;font-weight:600
}

/* TABS */
.tabs{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:10px;margin-bottom:12px
}
.tabs button{
  background:#fff;border:none;border-radius:14px;
  padding:12px;font-weight:600;
  box-shadow:0 4px 10px rgba(0,0,0,.08)
}
body.dark .tabs button{background:#1c1c1e;color:#fff}
.tabs button.active{outline:2px solid #007aff}

/* PANELS */
.panel{
  display:none;background:#fff;border-radius:18px;
  padding:14px;box-shadow:0 8px 18px rgba(0,0,0,.08)
}
body.dark .panel{background:#1c1c1e}
.panel.active{display:block}

/* INPUTS */
.input{margin:10px 0}
label{font-size:13px;opacity:.7}
input,select{
  width:100%;padding:14px;border-radius:12px;
  border:1px solid #ccc;background:#fafafa;font-size:17px
}
body.dark input,body.dark select{background:#2c2c2e;color:white;border-color:#333}

/* BUTTONS */
.calc{
  margin-top:10px;width:100%;padding:14px;
  border-radius:14px;border:none;
  font-weight:800;background:#007aff;color:white
}
.clear{background:#ff3b30}

/* RESULT */
.result{
  margin-top:14px;padding:12px;border-radius:14px;
  background:#f5f5fa;font-size:15px;
  line-height:1.7;opacity:0;
  transform:translateY(6px);transition:.4s
}
body.dark .result{background:#2c2c2e}
.result.show{opacity:1;transform:none}
</style>
</head>
<body>

<div class="app">

<header>
  <div>
    <div class="title">Алко калькулятор</div>
    <div class="sub">iOS стиль • офлайн</div>
  </div>
  <button class="switch" onclick="toggleTheme()">Тема</button>
</header>

<div class="tabs">
  <button class="active" onclick="openTab(0)">Вода</button>
  <button onclick="openTab(1)">Аерометр</button>
  <button onclick="openTab(2)">Брага</button>
</div>

<!-- ========= ВОДА ========= -->
<div class="panel active">
  <div class="input">
    <label>Поточна міцність %</label>
    <input id="w1" type="number" inputmode="decimal">
  </div>
  <div class="input">
    <label>Потрібна міцність %</label>
    <input id="w2" type="number" inputmode="decimal">
  </div>
  <div class="input">
    <label>Початковий обʼєм (л)</label>
    <input id="v1" type="number" inputmode="decimal">
  </div>
  <button class="calc" onclick="calcWater()">Розрахувати</button>
  <button class="calc clear" onclick="clearAll()">Очистити</button>
  <div id="rw" class="result"></div>
</div>

<!-- ========= АЕРОМЕТР ========= -->
<div class="panel">
  <div class="input">
    <label>Тип аерометра</label>
    <select>
      <option>АСП-3</option>
    </select>
  </div>
  <div class="input">
    <label>Показ спиртометра %</label>
    <input id="aspv" type="number" inputmode="decimal" oninput="calcAsp()">
  </div>
  <div class="input">
    <label>Температура °C</label>
    <input id="aspt" type="number" inputmode="decimal" oninput="calcAsp()">
  </div>
  <div class="input">
    <label>Режим розрахунку</label>
    <select id="mode" onchange="calcAsp()">
      <option value="real">Реальна</option>
      <option value="gost">За ГОСТ</option>
    </select>
  </div>
  <button class="calc" onclick="calcAsp()">Розрахувати</button>
  <button class="calc clear" onclick="clearAll()">Очистити</button>
  <div id="ra" class="result"></div>
</div>

<!-- ========= БРАГА ========= -->
<div class="panel">
  <div class="input">
    <label>OG (АЦ-2)</label>
    <input id="og" type="number" inputmode="decimal" oninput="calcBraga()">
  </div>
  <div class="input">
    <label>FG (АЦ-2)</label>
    <input id="fg" type="number" inputmode="decimal" oninput="calcBraga()">
  </div>
  <div class="input">
    <label>Обʼєм браги (л)</label>
    <input id="vol" type="number" inputmode="decimal" oninput="calcBraga()">
  </div>
  <button class="calc" onclick="calcBraga()">Розрахувати</button>
  <button class="calc clear" onclick="clearAll()">Очистити</button>
  <div id="rb" class="result"></div>
</div>

</div>

<script>
// ВКЛАДКИ
function openTab(i){
  const panels=document.querySelectorAll(".panel");
  const Btns=document.querySelectorAll(".tabs button");
  panels.forEach((p,x)=>p.classList.toggle("active",x===i));
  Btns.forEach((b,x)=>b.classList.toggle("active",x===i));
}

// ТЕМА
function toggleTheme(){
  document.body.classList.toggle("dark");
}

// ОЧИСТКА
function clearAll(){
  document.querySelectorAll("input").forEach(i=>i.value="");
  document.querySelectorAll(".result").forEach(r=>{r.innerHTML="";r.classList.remove("show")});
}

// ВОДА
function calcWater(){
  let s1=+w1.value, s2=+w2.value, v=+v1.value;
  if(!s1||!s2||!v) return;
  let abs=v*s1/100;
  let final=abs/(s2/100);
  let add=final-v;
  rw.innerHTML=`Додати води: <b>${add.toFixed(2)} л</b><br>Кінцевий обʼєм: <b>${final.toFixed(2)} л</b>`;
  rw.classList.add("show");
}

// АЕРОМЕТР
function calcAsp(){
  let s=parseFloat(aspv.value);
  let t=parseFloat(aspt.value);
  let mode=document.getElementById("mode").value;
  if(isNaN(s)||isNaN(t)) return;
  let delta=t-20;
  let k = (mode==="gost") ? 0.15 : 0.30;
  let real=s-(delta*k);
  if(real<0) real=0;
  if(real>100) real=100;
  let err=(mode==="gost")?"±0.5%":"польова оцінка";
  ra.innerHTML=`Результат: <b>${real.toFixed(2)}%</b><br>Похибка: ${err}`;
  ra.classList.add("show");
}

// БРАГА
function calcBraga(){
  let ogv=parseFloat(og.value);
  let fgv=parseFloat(fg.value);
  let v=parseFloat(vol.value);
  if(isNaN(ogv)||isNaN(v)) return;
  if(isNaN(fgv)) fgv=0;
  let abv=(ogv-fgv)*0.5056;
  let abs=v*(abv/100);
  let s40=abs/0.4;
  let s43=abs/0.43;
  rb.innerHTML=`
    ABV браги: <b>${abv.toFixed(3)}%</b><br>
    Абсолютний спирт: <b>${abs.toFixed(2)} л</b><br>
    Сирець 40%: <b>${s40.toFixed(2)} л</b><br>
    Сирець 43%: <b>${s43.toFixed(2)} л</b>
  `;
  rb.classList.add("show");
}
</script>

</body>
</html>